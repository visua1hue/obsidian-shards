/* CHECKBOX INPUT ELEMENT :: Unique Checkbox */
/*  Unchecked Checkbox Style  */
input.task-list-item-checkbox {
  -webkit-appearance: none;
  appearance: none;
  background-color: transparent;
  width: 10px;
  height: 10px;
  border-radius: 3px;
  border: none;
  box-shadow: 0 0 0 1.5px var(--checkbox-border-color);
  position: relative;
  overflow: hidden;
  isolation: isolate;
  cursor: pointer;
  vertical-align: middle;
  top: -2px;
  transition: box-shadow 300ms ease, transform 300ms ease;
  transform: scale(1) translateZ(0);
}

.markdown-reading-view .task-list-item-checkbox {
  top: -0.05em;
}

/*  Checkbox Hover State  */
input.task-list-item-checkbox:hover {
  box-shadow: 0 0 0 1.5px var(--interactive-accent);
  transform: scale(1.1) translateZ(0);
}

/*  Animated Fill Element (Linear Fade)  */
input.task-list-item-checkbox::before {
  content: "";
  position: absolute;
  z-index: 1;
  width: 100%;
  height: 100%;
  background-color: var(--interactive-accent);
  border-radius: 3px;
  opacity: 0;
  transition: opacity 300ms ease;
  transform: translateZ(0);
}

/*  SVG Checkmark Symbol  */
input[type="checkbox"]:checked:after {
  top: 0;
  inset-inline-start: -0.5px;
  transform: scale(0.9) translate(-8%, -8%) !important;
}

input.task-list-item-checkbox::after {
  content: "";
  position: absolute;
  z-index: 2;
  width: 100%;
  height: 100%;
  background-color: white;
  -webkit-mask-position: center;
  -webkit-mask-size: 60%;
  -webkit-mask-repeat: no-repeat;
  -webkit-mask-image: url('data:image/svg+xml; utf8, <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%23000000" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg>') !important;
  opacity: 0;
  transform: scale(0.5);
}

/*  Checked State Styles  */
.HyperMD-task-line[data-task="x"] > .task-list-label > .task-list-item-checkbox,
.task-list-item[data-task="x"] > .task-list-item-checkbox {
  box-shadow: 0 0 0 1.5px var(--interactive-accent);
  animation: squish-and-pop 0.5s ease forwards;
}
.HyperMD-task-line[data-task="x"]
  > .task-list-label
  > .task-list-item-checkbox::before,
.task-list-item[data-task="x"] > .task-list-item-checkbox::before {
  opacity: 1;
}
.HyperMD-task-line[data-task="x"]
  > .task-list-label
  > .task-list-item-checkbox::after,
.task-list-item[data-task="x"] > .task-list-item-checkbox::after {
  animation: checkmark-appear 0.4s 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
}

/*  Completed Task Text Styling  */
.HyperMD-task-line,
.task-list-item {
  transition: color 0.4s ease;
}
.HyperMD-task-line[data-task="x"],
.task-list-item[data-task="x"] {
  text-decoration: none !important;
  color: var(--checklist-done-color);
}
.HyperMD-task-line span[class*="cm-list"],
.task-list-item > span {
  text-decoration: none;
  background-image: linear-gradient(
    var(--checklist-done-color),
    var(--checklist-done-color)
  );
  background-repeat: no-repeat;
  background-position: 0.25em 50%;
  -webkit-box-decoration-break: clone;
  box-decoration-break: clone;
  background-size: 0% 1.5px;
  transition: background-size 0.4s ease;
}
.HyperMD-task-line[data-task="x"] span[class*="cm-list"],
.task-list-item[data-task="x"] > span {
  background-size: calc(100% - 0.25em) 1.5px;
}

/*  Animation Keyframes  */
@keyframes squish-and-pop {
  0% {
    transform: scale(1.1) translateZ(0);
  }
  40% {
    transform: scale(1.2, 0.8) translateZ(0);
  }
  60% {
    transform: scale(0.9, 1.2) translateZ(0);
  }
  100% {
    transform: scale(1) translateZ(0);
  }
}
@keyframes checkmark-appear {
  0% {
    opacity: 0;
    transform: scale(0.5);
  }
  60% {
    opacity: 1;
    transform: scale(1.1);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}
